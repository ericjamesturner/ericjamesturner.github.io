if (self.CavalryLogger) { CavalryLogger.start_js(["gDrlG"]); }

__d("FBMapInfoButtonUtils.react",["cx","FBMapInfoButton.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a,c,d,e){e===void 0&&(e={vertical:"bottom",horizontal:"right"});return h.jsxs(b("FBOverlayContainer.react"),{className:"_8mm5",children:[h.jsx(b("FBOverlayBase.react"),{children:a}),h.jsx(b("FBOverlayElement.react"),babelHelpers["extends"]({},e,{children:h.jsx(b("FBMapInfoButton.react"),{fetchMapInfo:function(){return c},popoverPosition:e,surface:d})}))]})};e.exports={composeMapInfoButtonAndComponent:a}}),null);
__d("MercuryMessageLocationShareAttachment.react",["cx","FBMapInfoButtonUtils.react","Link.react","MercuryFallbackShareAttachmentContent.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","React","XPlacesMapController","prop-types"],(function(a,b,c,d,e,f,g){"use strict";var h=b("FBMapInfoButtonUtils.react").composeMapInfoButtonAndComponent,i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.renderLink=function(a){if(b("MercuryShareAttachmentRenderLocations").isPreview(this.props.location))return a;var c=this.props.attachment.deduplication_key;c=b("XPlacesMapController").getURIBuilder().setInt("message_location_id",c).getURI();c=i.jsx(b("Link.react"),{className:"_5rw4",href:this.props.attachment.uri,ajaxify:c,rel:"dialog",target:"_blank",children:a});return h(c,{mapUrl:this.props.attachment.uri,mapBounds:null,zoom:null},"messenger",{horizontal:"left",vertical:"top"})};d.render=function(){return this.renderLink(i.jsx(b("MercuryFallbackShareAttachmentContent.react"),babelHelpers["extends"]({},this.props)))};return c}(i.Component);a.propTypes={attachment:b("MercuryShareAttachmentReactShape"),location:b("prop-types").oneOf(b("MercuryShareAttachmentRenderLocations").getValues())};e.exports=a}),null);
__d("MessengerPlatformCallToAction.react",["cx","fbt","AsyncDialog","AsyncRequest","Bootloader","BrowserExtensionsDialog","CurrentUser","FBConfirmDialog.react","FBPaymentsCheckoutV2FlowContainer.react","FBPaymentsSerializableCheckoutConfigurationParser","LazyComponent.react","Link.react","LoadOnRender.react","MercuryIDs","MercuryShareAttachmentRenderLocations","MessagingForwardAttachmentDialog.react","MessengerAdsWebTypedLogger","MessengerDialogs.bs","MessengerEnvironment","MessengerForwardAttachmentDialogReact.bs","MessengerPlatformPostbackFailedDialog.react","MNCommerceCallToActionHandlerMap","MNCommerceCTAProcessor","MNCommercePostbackCTADataManager","MNCommercePromotionReactShapes","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React","Tooltip","URI","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("MessengerForwardAttachmentDialogReact.bs").jsComponent,k=b("React"),l=function(a){b("Bootloader").loadModules(["MessengerPreviewDialogReact.bs"],function(b){b=b.jsComponent;return a(b)},"MessengerPlatformCallToAction.react")};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showDialog:!1,showPaymentCheckoutDialog:!1,showShare:!1},d.$4=function(a){d.props.isSponsored&&new(b("MessengerAdsWebTypedLogger"))().setEvent("messenger_ads_link_click_cta").setIsSponsored(d.props.isSponsored).setItemID(d.props.retailItem&&d.props.retailItem.id).setMessageID(d.props.messageID).setPageID(d.props.pageID).log(),d.props.isPageAttachment&&d.props.pageID&&b("PagesLogger").log(d.props.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").MESSENGER_ATTACHMENT,"messenger_thread",[],{action_title:d.props.callToAction.action_title}),d.$2()},d.$6=function(){b("MNCommerceCTAProcessor").logCTAClick(d.props.callToAction),d.setState({showShare:!0})},d.$3=function(){d.setState({showPaymentCheckoutDialog:!0})},d.$8=function(){d.setState({showPaymentCheckoutDialog:!1})},d.$5=function(){d.setState({showShare:!1})},d.onConfirm=function(){d.setState({showDialog:!0})},d.onCancel=function(){d.setState({showDialog:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this,c=this.props.callToAction,d=this.props.threadID,e=this.props.index;if(!c)return null;var f=function(c,d){return k.jsxs("div",{children:[a.$1(c),k.jsx(b("Link.react"),{className:"_h2l",onClick:function(){a.$2(),a.$3()},children:k.jsx("div",{className:d,children:c.translated_title||c.title})}),k.jsx("div",{className:"_h2m",children:c.payment_metadata.total_price})]},e)},g=function(a,b){var c=h._("The feature has been disabled.");return n(a,b,c)},m=function(a,b){var c=h._("To use this feature, use the Messenger app.");return n(a,b,c)},n=function(a,c,d){return k.jsx("div",babelHelpers["extends"]({className:b("joinClasses")("_3cno",c),"data-tooltip-alignh":"center","data-tooltip-position":"above"},b("Tooltip").propsFor(d),{children:a.translated_title||a.title||a.action_title}),a.title||a.action_title)},o=function(c,d){var e=function(d){b("BrowserExtensionsDialog").show(new(i||(i=b("URI")))(c.action_link||c.action_url),b("MercuryIDs").getThreadFBIDFromThreadID(a.props.pageID),b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID),b("CurrentUser").getID()),a.$2()};return k.jsx("div",{children:k.jsx(b("Link.react"),{className:d,onClick:e,children:c.title||c.action_title})},c.id)},p=this.props.classNames;if(c.is_disabled)return g(c,p);g=c.action_type||c.action_open_type;switch(g){case 4:g=function(e){a.onCancel(),c.is_mutable_by_server?b("MNCommercePostbackCTADataManager").send(c.id,function(a){a.error&&b("MessengerDialogs.bs").showDialog(function(){return k.jsx(b("MessengerPlatformPostbackFailedDialog.react"),{})})},null,a.props.messageID):b("MNCommercePostbackCTADataManager").sendAndConfirm(c.id,c.title||c.action_title,d,null,function(a){a.error&&b("MessengerDialogs.bs").showDialog(function(){return k.jsx(b("MessengerPlatformPostbackFailedDialog.react"),{})})},null,[],a.props.messageID),b("MNCommerceCTAProcessor").logCTAClick(c)};var q=null;this.state.showDialog&&c.should_show_user_confirmation&&(q=k.jsx(b("FBConfirmDialog.react"),{title:c.confirmation_title,shown:!0,onConfirm:g,onCancel:this.onCancel,confirmButtonText:c.confirmation_continue_label,cancelButtonText:c.confirmation_cancel_label,content:c.confirmation_message}));g=c.should_show_user_confirmation?this.onConfirm:g;return k.jsxs("div",{children:[k.jsx(b("Link.react"),{className:p,onClick:g,children:c.translated_title||c.title||c.action_title}),q]},e);case 2:return b("MNCommerceCallToActionHandlerMap").getHandler(c.action_link||c.action_url).setFallbackOnClick(this.$4).setThreadID(d).renderForWebLink(c,p);case 3:return m(c,p);case 1:q=(g=c)!=null?(g=g.webview_metadata)!=null?g.messenger_extensions:g:g;return q?o(c,p):b("MNCommerceCallToActionHandlerMap").getHandler(c.action_link||c.action_url).setFallbackOnClick(this.$4).setThreadID(d).renderForNativeLink(c,p);case 8:return f(c,p);case 7:g=b("MessengerEnvironment").messengerui?j:b("MessagingForwardAttachmentDialog.react");q=h._("Share in Separate messages");o=k.jsx(g,{attachmentID:c.id,messageID:this.props.messageID,onClose:this.$5,shown:this.state.showShare,title:q,shareType:"platform_share_CTA"});return k.jsxs("div",{children:[k.jsx(b("Link.react"),{className:p,onClick:this.$6,children:c.title||c.action_title}),o]},e);case 12:f=h._("Share in Separate messages");return k.jsxs("div",{children:[k.jsx(b("Link.react"),{className:p,onClick:this.$6,children:c.title}),k.jsx(b("LoadOnRender.react"),{component:k.jsx(b("LazyComponent.react"),{attachmentID:c.id,image_url:c.action_objects[0].image_url,messageID:this.props.messageID,onClose:this.$5,pageID:this.props.pageID,preview_title:c.action_objects[0].preview_title,preview_subtitle:c.action_objects[0].preview_subtitle,shown:this.state.showShare,target_display:c.action_objects[0].target_display,title:f,threadID:this.props.threadID}),loader:l,placeholder:k.jsx("span",{})},"dialog")]},e);case 5:g=function(d){b("MNCommerceCTAProcessor").logCTAClick(c),b("MNCommerceCTAProcessor").process(c.id,a.props.messageID)};return k.jsx(b("Link.react"),{className:p,onClick:g,children:c.translated_title||c.title},e);case 9:q=function(a){b("AsyncDialog").send(new(b("AsyncRequest"))("/ajax/bugs/report"))};return k.jsx(b("Link.react"),{className:p,onClick:q,children:c.translated_title||c.title},e);default:return m(c,p)}};d.$1=function(a){if(this.state.showPaymentCheckoutDialog){a=b("FBPaymentsSerializableCheckoutConfigurationParser").parse(this.$7(a.payment_metadata.payment_module_config),!0);a.contentConfiguration.checkoutClosedCallback=this.$8;var c=a.contentConfiguration.confirmationConfiguration||{};c.confirmationClosedCallback=this.$8;a.contentConfiguration.confirmationConfiguration=c;return k.jsx(b("FBPaymentsCheckoutV2FlowContainer.react"),{configuration:a})}return null};d.$7=function(a){var b="";try{b=JSON.parse(a)}catch(b){return a}b.checkout_configuration&&b.checkout_configuration.payment_info&&b.checkout_configuration.payment_info.extra_data&&(b.checkout_configuration.payment_info.extra_data.message_id=this.props.messageID);return JSON.stringify(b)};d.$2=function(){b("MNCommerceCTAProcessor").logCTAClick(this.props.callToAction),b("MNCommerceCTAProcessor").postHandle(this.props.callToAction.id,this.props.messageID)};return c}(k.Component);a.propTypes={callToAction:(c=b("prop-types")).object,index:c.number,classNames:c.string,isSponsored:c.bool,isPageAttachment:c.bool,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()),messageID:c.string,mnMessageType:c.string,pageID:c.string,retailItem:b("MNCommercePromotionReactShapes").RetailItem,threadID:c.string};e.exports=a}),null);
__d("PageRecommendationsCircleScoreUtils",["PageRatingConfig","gkx"],(function(a,b,c,d,e,f){"use strict";a={showCircleInGlobalRollout:function(){return b("PageRatingConfig").show_rating_circle&&b("gkx")("676925")}};e.exports=a}),null);
__d("PageMessengerShareAttachment.react",["ix","cx","CenteredContainer.react","FBMapInfoButtonUtils.react","GeoCoordinates","GeoMarker","Image.react","Link.react","MercuryAttachment","MercuryFallbackShareAttachment.react","MercuryIDs","MercuryShareAttachmentRenderLocations","MessengerPlatformCallToAction.react","PageRatingConfig","PageRecommendationsCircleScore.react","PageRecommendationsCircleScoreType","PageRecommendationsCircleScoreUtils","React","StaticGeoMapBase.react","URI","fbglyph","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("FBMapInfoButtonUtils.react").composeMapInfoButtonAndComponent,k=b("React"),l=b("MercuryShareAttachmentRenderLocations").CHAT,m=b("MercuryShareAttachmentRenderLocations").MESSENGER,n=b("PageRecommendationsCircleScoreType").MESSENGER_PAGE_SHARE,o=500,p=200,q=15,r=80,s=String.fromCodePoint(183);function t(a){var c=a.coverPhotoDimensions,d=a.coverPhotoURL;if(a.latitude!=null&&a.longitude!=null){var e=new(b("GeoMarker"))(new(b("GeoCoordinates"))(a.latitude,a.longitude));c={width:o,height:p};e=b("StaticGeoMapBase.react").getMapImageURI({size:c,zoom:q,markers:[e],boundingBox:null,center:null,paths:null});d=e==null?"":e.toString()}if(d===null)return k.jsx("div",{className:"_3ay3"});e=b("MercuryAttachment").resizeContain({width:a.maxWidth,height:a.maxWidth},c);a=e.width;c=e.height;return k.jsx(b("Image.react"),{className:"_3ay6",height:c,src:d,width:a})}function u(a){var c=null,d=a.pageID;d!==null&&d!==void 0&&b("PageRatingConfig").show_rating_circle&&b("gkx")("676925")&&(d=b("MercuryIDs").tokenize(d).value,c=k.jsx(b("PageRecommendationsCircleScore.react"),{pageIDString:d,scoreType:n}));return k.jsx("div",{className:(a.hasCoverPhoto?"_3ay7":"")+(a.hasCoverPhoto?"":" _3ayd")+" _2pim",children:k.jsxs("div",{className:"_6khi",children:[k.jsx(b("Image.react"),{className:"_3aye",height:r,src:a.media.image,width:r}),c]})})}function v(a){return k.jsx("div",{className:"__6k _3ayf _2phz",children:a.name})}function w(a){var c=a.rating===null||a.rating===0||b("PageRecommendationsCircleScoreUtils").showCircleInGlobalRollout()?null:k.jsxs("span",{children:[k.jsx("text",{className:"_3ayg",children:a.rating}),k.jsx(b("Image.react"),{className:"_3ayh",src:g("134821")})," "+s+" "]});return k.jsxs("div",{className:"_3ayi _2pi7 _2pio",children:[k.jsxs("div",{children:[c,a.category]}),k.jsx("div",{children:a.address})]})}function x(a){var c=a.attachment.messenger_ctas;if(!c||c.length===0)return null;var d=a.location===l;c=c.filter(function(a){return a.action_link||a.action_url}).map(function(c,e){var f="_38ac"+(d?" _38ae":"")+(a.location!==m?" _38aj":"");return k.jsx(b("MessengerPlatformCallToAction.react"),{callToAction:c,classNames:f,index:e,isPageAttachment:!0,location:a.location,pageID:c.page_id},e)});return k.jsx("div",{className:"_38ak"+(d?" _38al":"")+(d?" _38aa":"")+" _17fw",children:c})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(!this.props.attachment.target)return k.jsx(b("MercuryFallbackShareAttachment.react"),babelHelpers["extends"]({},this.props));var a=this.props,c=a.attachment,d=a.maxWidth;a=a.pageID;var e=c.uri,f=c.media;c=c.target;var g=c.address,h=c.category,l=c.coverPhotoDimensions,n=c.coverPhotoID,o=c.coverPhotoURL,p=c.latitude,q=c.longitude,r=c.name;c=c.rating;l=k.jsx(b("Link.react"),{href:new(i||(i=b("URI")))(e),target:"_blank",children:k.jsx(t,{coverPhotoDimensions:l,coverPhotoURL:o,latitude:p,longitude:q,maxWidth:d})});p!=null&&q!=null&&(l=j(l,{mapUrl:e,mapBounds:null,zoom:null},"messenger",{vertical:"top",horizontal:"right"}));return k.jsxs("div",{className:(this.props.location===m?"_52mr":"")+(this.props.location===m?" _5i_d":""),style:{maxWidth:d},children:[l,k.jsx(b("Link.react"),{href:new i(e),target:"_blank",children:k.jsx(u,{hasCoverPhoto:n!==null,media:f,pageID:a})}),k.jsxs(b("CenteredContainer.react"),{horizontal:!0,children:[k.jsx(b("Link.react"),{href:new i(e),target:"_blank",children:k.jsx(v,{name:r})}),k.jsx(w,{address:g,category:h,rating:c})]}),k.jsx(x,{attachment:this.props.attachment,location:this.props.location})]})};return c}(k.PureComponent);e.exports=a}),null);